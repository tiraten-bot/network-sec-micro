syntax = "proto3";

package warrior;

option go_package = "network-sec-micro/api/proto/warrior";

import "google/protobuf/timestamp.proto";

// Warrior Service (gRPC methods for service-to-service communication)
service WarriorService {
  // Get warrior by username (for other services)
  rpc GetWarriorByUsername(GetWarriorByUsernameRequest) returns (GetWarriorByUsernameResponse);
  
  // Get warrior by ID (for other services)
  rpc GetWarriorByID(GetWarriorByIDRequest) returns (GetWarriorByIDResponse);
  
  // Update warrior's power/stats
  rpc UpdateWarriorPower(UpdateWarriorPowerRequest) returns (UpdateWarriorPowerResponse);
  
  // Update warrior's HP (for healing)
  rpc UpdateWarriorHP(UpdateWarriorHPRequest) returns (UpdateWarriorHPResponse);
}

// Request to get warrior by username
message GetWarriorByUsernameRequest {
  string username = 1;
}

// Response with warrior
message GetWarriorByUsernameResponse {
  Warrior warrior = 1;
}

// Request to get warrior by ID
message GetWarriorByIDRequest {
  uint32 warrior_id = 1;
}

// Response with warrior
message GetWarriorByIDResponse {
  Warrior warrior = 1;
}

// Request to update power
message UpdateWarriorPowerRequest {
  uint32 warrior_id = 1;
  int32 total_power = 2;
  int32 weapon_count = 3;
}

// Response after updating power
message UpdateWarriorPowerResponse {
  bool success = 1;
  string message = 2;
}

// Request to update HP
message UpdateWarriorHPRequest {
  uint32 warrior_id = 1;
  int32 new_hp = 2;
}

// Response after updating HP
message UpdateWarriorHPResponse {
  bool success = 1;
  string message = 2;
  int32 old_hp = 3;
  int32 new_hp = 4;
}

// Warrior model
message Warrior {
  uint32 id = 1;
  string username = 2;
  string email = 3;
  string role = 4;
  int32 coin_balance = 5;
  int32 total_power = 6;
  int32 weapon_count = 7;
  int32 current_hp = 8; // Current HP (for healing)
  int32 max_hp = 9;     // Maximum HP (calculated from total_power)
  google.protobuf.Timestamp created_at = 10;
  google.protobuf.Timestamp updated_at = 11;
}

