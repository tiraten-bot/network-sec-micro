{
  "routes": [
    {
      "name": "warrior api",
      "hosts": ["localhost"],
      "path_prefix": "/api/warrior",
      "methods_deny": ["TRACE"],
      "upstreams": ["http://localhost:8080", "http://localhost:8080"],
      "canary_upstream": "http://localhost:18080",
      "canary_percent": "10%",
      "headers_set": {"X-Gateway": "fiber"},
      "headers_remove": ["X-Internal-Token"],
      "query_inject": {"via": "gw"},
      "rewrite_prefix": "/api/warrior",
      "websocket_passthrough": true,
      "rate_limit": {"enabled": true, "rps": 50, "burst": 100, "key_header": "Authorization"},
      "circuit_breaker": {"enabled": true, "failure_ratio": 0.5, "min_requests": 20, "interval_sec": 30, "timeout_sec": 20},
      "quota": {"enabled": true, "daily": 5000, "hourly": 500, "key_header": "Authorization"},
      "header_routes": [{"header": "X-Tenant", "value": "vip", "upstream": "http://localhost:8080"}],
      "load_balancing": "least_connections",
      "outlier_detection": {"enabled": true, "failure_threshold": 5, "eject_duration_sec": 30}
    },
    {
      "name": "enemy regex",
      "regex": "^/api/enemy(/.*)?$",
      "methods_allow": ["GET", "POST", "PUT", "DELETE"],
      "upstream": "http://localhost:8083",
      "rewrite_prefix": "/api/enemy",
      "rate_limit": {"enabled": true, "use_redis": true, "window_sec": 1, "limit": 30, "key_header": "Authorization"},
      "quota": {"enabled": true, "hourly": 100}
    },
    {
      "name": "battle api",
      "hosts": ["localhost"],
      "path_prefix": "/api/battles",
      "methods_deny": ["TRACE"],
      "upstreams": ["http://localhost:8085"],
      "headers_set": {"X-Gateway": "fiber"},
      "headers_remove": ["X-Internal-Token"],
      "rewrite_prefix": "/api/battles",
      "rate_limit": {"enabled": true, "rps": 30, "burst": 50, "key_header": "Authorization"},
      "circuit_breaker": {"enabled": true, "failure_ratio": 0.5, "min_requests": 10, "interval_sec": 30, "timeout_sec": 20},
      "quota": {"enabled": true, "daily": 2000, "hourly": 200, "key_header": "Authorization"},
      "load_balancing": "round_robin",
      "outlier_detection": {"enabled": true, "failure_threshold": 5, "eject_duration_sec": 30}
    },
    {
      "name": "battlespell api",
      "hosts": ["localhost"],
      "path_prefix": "/api/v1/spells",
      "methods_deny": ["TRACE"],
      "upstreams": ["http://localhost:8086"],
      "headers_set": {"X-Gateway": "fiber"},
      "headers_remove": ["X-Internal-Token"],
      "rewrite_prefix": "/api/v1/spells",
      "rate_limit": {"enabled": true, "rps": 20, "burst": 30, "key_header": "Authorization"},
      "circuit_breaker": {"enabled": true, "failure_ratio": 0.5, "min_requests": 10, "interval_sec": 30, "timeout_sec": 20},
      "quota": {"enabled": true, "daily": 1000, "hourly": 100, "key_header": "Authorization"},
      "load_balancing": "round_robin",
      "outlier_detection": {"enabled": true, "failure_threshold": 5, "eject_duration_sec": 30}
    },
    {
      "name": "arena api",
      "hosts": ["localhost"],
      "path_prefix": "/api/v1/arena",
      "methods_deny": ["TRACE"],
      "upstreams": ["http://localhost:8087"],
      "headers_set": {"X-Gateway": "fiber"},
      "headers_remove": ["X-Internal-Token"],
      "rewrite_prefix": "/api/v1/arena",
      "rate_limit": {"enabled": true, "rps": 40, "burst": 60, "key_header": "Authorization"},
      "circuit_breaker": {"enabled": true, "failure_ratio": 0.5, "min_requests": 10, "interval_sec": 30, "timeout_sec": 20},
      "quota": {"enabled": true, "daily": 3000, "hourly": 300, "key_header": "Authorization"},
      "load_balancing": "round_robin",
      "outlier_detection": {"enabled": true, "failure_threshold": 5, "eject_duration_sec": 30}
    }
    ,
    {
      "name": "arenaspell api",
      "hosts": ["localhost"],
      "path_prefix": "/api/v1/arenaspells",
      "methods_deny": ["TRACE"],
      "upstreams": ["http://localhost:8088"],
      "headers_set": {"X-Gateway": "fiber"},
      "headers_remove": ["X-Internal-Token"],
      "rewrite_prefix": "/api/v1/arenaspells",
      "rate_limit": {"enabled": true, "rps": 20, "burst": 30, "key_header": "Authorization"},
      "circuit_breaker": {"enabled": true, "failure_ratio": 0.5, "min_requests": 10, "interval_sec": 30, "timeout_sec": 20},
      "quota": {"enabled": true, "daily": 1000, "hourly": 100, "key_header": "Authorization"},
      "load_balancing": "round_robin",
      "outlier_detection": {"enabled": true, "failure_threshold": 5, "eject_duration_sec": 30}
    },
    {
      "name": "heal gRPC",
      "hosts": ["localhost"],
      "path_prefix": "/heal.HealService",
      "grpc_proxy": true,
      "upstreams": ["http://localhost:50058"],
      "rate_limit": {"enabled": true, "rps": 30, "burst": 50, "key_header": "Authorization"},
      "circuit_breaker": {"enabled": true, "failure_ratio": 0.5, "min_requests": 10, "interval_sec": 30, "timeout_sec": 20},
      "quota": {"enabled": true, "daily": 2000, "hourly": 200, "key_header": "Authorization"},
      "load_balancing": "round_robin",
      "outlier_detection": {"enabled": true, "failure_threshold": 5, "eject_duration_sec": 30}
    },
    {
      "name": "weapon gRPC",
      "hosts": ["localhost"],
      "path_prefix": "/weapon.WeaponService",
      "grpc_proxy": true,
      "upstreams": ["http://localhost:50057"],
      "rate_limit": {"enabled": true, "rps": 60, "burst": 100, "key_header": "Authorization"},
      "circuit_breaker": {"enabled": true, "failure_ratio": 0.5, "min_requests": 10, "interval_sec": 30, "timeout_sec": 20},
      "quota": {"enabled": true, "daily": 3000, "hourly": 300, "key_header": "Authorization"},
      "load_balancing": "round_robin",
      "outlier_detection": {"enabled": true, "failure_threshold": 5, "eject_duration_sec": 30}
    },
    {
      "name": "repair gRPC",
      "hosts": ["localhost"],
      "path_prefix": "/repair.RepairService",
      "grpc_proxy": true,
      "upstreams": ["http://localhost:50061"],
      "rate_limit": {"enabled": true, "rps": 30, "burst": 50, "key_header": "Authorization"},
      "circuit_breaker": {"enabled": true, "failure_ratio": 0.5, "min_requests": 10, "interval_sec": 30, "timeout_sec": 20},
      "quota": {"enabled": true, "daily": 2000, "hourly": 200, "key_header": "Authorization"},
      "load_balancing": "round_robin",
      "outlier_detection": {"enabled": true, "failure_threshold": 5, "eject_duration_sec": 30}
    }
  ]
}


