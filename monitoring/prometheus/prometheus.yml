global:
  scrape_interval: 15s
  evaluation_interval: 15s
  external_labels:
    cluster: 'network-sec-micro'
    environment: 'development'

# Alertmanager configuration
alerting:
  alertmanagers:
    - static_configs:
        - targets:
            - alertmanager:9093

# Load rules once and periodically evaluate them
rule_files:
  - "alert_rules.yml"

# Scrape configurations
scrape_configs:
  # Prometheus itself
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Warrior Service
  - job_name: 'warrior'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['warrior:8080']
        labels:
          service: 'warrior'
          type: 'http'

  # Weapon Service
  - job_name: 'weapon'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['weapon:8081']
        labels:
          service: 'weapon'
          type: 'http'

  # Coin Service (gRPC - will need HTTP metrics endpoint)
  - job_name: 'coin'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['coin:50051']
        labels:
          service: 'coin'
          type: 'grpc'

  # Enemy Service
  - job_name: 'enemy'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['enemy:8083']
        labels:
          service: 'enemy'
          type: 'http'

  # Dragon Service
  - job_name: 'dragon'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['dragon:8084']
        labels:
          service: 'dragon'
          type: 'http'

  # Battle Service
  - job_name: 'battle'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['battle:8085']
        labels:
          service: 'battle'
          type: 'http'

  # BattleSpell Service
  - job_name: 'battlespell'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['battlespell:8086']
        labels:
          service: 'battlespell'
          type: 'http'

  # Arena Service
  - job_name: 'arena'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['arena:8087']
        labels:
          service: 'arena'
          type: 'http'

  # ArenaSpell Service
  - job_name: 'arenaspell'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['arenaspell:8088']
        labels:
          service: 'arenaspell'
          type: 'http'

  # Repair Service (gRPC - will need HTTP metrics endpoint)
  - job_name: 'repair'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['repair:50061']
        labels:
          service: 'repair'
          type: 'grpc'

  # Heal Service (gRPC - will need HTTP metrics endpoint)
  - job_name: 'heal'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['heal:50058']
        labels:
          service: 'heal'
          type: 'grpc'

  # Armor Service
  - job_name: 'armor'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['armor:8082']
        labels:
          service: 'armor'
          type: 'http'

  # Fiber Gateway
  - job_name: 'fiber-gateway'
    metrics_path: '/metrics'
    static_configs:
      - targets: ['fiber-gateway:8090']
        labels:
          service: 'gateway'
          type: 'http'

